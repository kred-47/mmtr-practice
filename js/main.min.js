"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var textAreaElement=document.getElementById("js-input"),lengthData=document.getElementById("length"),wordsData=document.getElementById("number_of_words"),withoutSpacesData=document.getElementById("without_spaces"),tableData=document.getElementById("table-percent"),TextArea=function(){function e(){_classCallCheck(this,e),textAreaElement.addEventListener("keyup",this.onKeyUp)}return _createClass(e,[{key:"onKeyUp",value:function(){for(lengthData.value=textAreaElement.value.length,wordsData.value=""===textAreaElement.value?0:textAreaElement.value.trim().split(" ").length,withoutSpacesData.value=textAreaElement.value.trim().split(" ").join("").length;tableData.firstChild&&tableData.removeChild(tableData.firstChild););var e=_toConsumableArray(textAreaElement.value).reduce((function(e,t){return e[t]=e[t]?e[t]+1:1,e}),{}),t=Object.entries(e),r=[["Символ","Процент"]].concat(t);!function(e,t){for(var r=0;r<t.length;r++){for(var a=document.createElement("tr"),n=0;n<t[r].length;n++){var o=document.createElement("td");o.innerHTML=t[r][n],a.appendChild(o)}e.appendChild(a)}}(tableData,r)}}]),e}();
"use strict";var Languages={RU:"ru",EN:"en"};
"use strict";function generateId(t){var n=Date.now();return"".concat(t,"-").concat(n,"-").concat(Math.round(Math.random()*n))}
"use strict";document.addEventListener("DOMContentLoaded",(function(){new TextArea,new ScreenKeyboard({inputSelector:"#js-input",blockSelector:"#textarea-block"}),new ScreenKeyboard({inputSelector:"#js-small-input",blockSelector:"#input-block"})}));
"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var ScreenKeyboard=function(){function e(t){_classCallCheck(this,e),this.screenKeyboardBlock=document.getElementById("js-keyboard-block"),this.toggleKeyboardElement=document.getElementById("toggle-keyboard"),this.language=window.navigator.language.split("-")[0],this.currentInput=document.querySelector(null==t?void 0:t.inputSelector),this.blockInput=document.querySelector(null==t?void 0:t.blockSelector),this.buttons=[],this.configKeyboard={lines:[{columns:[{style:{width:"80%",justifyContent:"end"},lines:[{style:{justifyContent:"start"},buttons:[{isFunc:!0,localeData:"Esc"},{isFunc:!1,localeData:{en:"`",ru:"ё"},alt:{en:"~",ru:"ё"},isActive:!1},{isFunc:!1,localeData:"1",alt:{en:"!",ru:"!"},isActive:!1},{isFunc:!1,localeData:"2",alt:{en:"@",ru:'"'},isActive:!1},{isFunc:!1,localeData:"3",alt:{en:"#",ru:"№"},isActive:!1},{isFunc:!1,localeData:"4",alt:{en:"$",ru:";"},isActive:!1},{isFunc:!1,localeData:"5",alt:{en:"%",ru:"%"},isActive:!1},{isFunc:!1,localeData:"6",alt:{en:"^",ru:":"},isActive:!1},{isFunc:!1,localeData:"7",alt:{en:"&",ru:"?"},isActive:!1},{isFunc:!1,localeData:"8",alt:{en:"*",ru:"*"},isActive:!1},{isFunc:!1,localeData:"9",alt:{en:"(",ru:"("},isActive:!1},{isFunc:!1,localeData:"0",alt:{en:")",ru:")"},isActive:!1},{isFunc:!1,localeData:"-",alt:{en:"_",ru:"_"},isActive:!1},{isFunc:!1,localeData:"=",alt:{en:"+",ru:"+"},isActive:!1},{isFunc:!0,localeData:"Backspace",type:"backspace",icon:"icon-cancel-alt"}]},{style:{justifyContent:"start"},buttons:[{isFunc:!0,localeData:"Tab",type:"tab",icon:"icon-exchange"},{isFunc:!1,localeData:{en:"q",ru:"й"},isActive:!1},{isFunc:!1,localeData:{en:"w",ru:"ц"},isActive:!1},{isFunc:!1,localeData:{en:"e",ru:"у"},isActive:!1},{isFunc:!1,localeData:{en:"r",ru:"к"},isActive:!1},{isFunc:!1,localeData:{en:"t",ru:"е"},isActive:!1},{isFunc:!1,localeData:{en:"y",ru:"н"},isActive:!1},{isFunc:!1,localeData:{en:"u",ru:"г"},isActive:!1},{isFunc:!1,localeData:{en:"i",ru:"ш"},isActive:!1},{isFunc:!1,localeData:{en:"o",ru:"щ"},isActive:!1},{isFunc:!1,localeData:{en:"p",ru:"з"},isActive:!1},{isFunc:!1,localeData:{en:"[",ru:"х"},alt:{en:"{",ru:"х"},isActive:!1},{isFunc:!1,localeData:{en:"]",ru:"ъ"},alt:{en:"}",ru:"ъ"},isActive:!1},{isFunc:!1,localeData:"\\",alt:{en:"|",ru:"/"},isActive:!1},{isFunc:!0,localeData:"Del",type:"del"}]},{style:{justifyContent:"start"},buttons:[{isFunc:!0,localeData:"Caps",type:"caps"},{isFunc:!1,localeData:{en:"a",ru:"ф"},isActive:!1},{isFunc:!1,localeData:{en:"s",ru:"ы"},isActive:!1},{isFunc:!1,localeData:{en:"d",ru:"в"},isActive:!1},{isFunc:!1,localeData:{en:"f",ru:"а"},isActive:!1},{isFunc:!1,localeData:{en:"g",ru:"п"},isActive:!1},{isFunc:!1,localeData:{en:"h",ru:"р"},isActive:!1},{isFunc:!1,localeData:{en:"j",ru:"о"},isActive:!1},{isFunc:!1,localeData:{en:"k",ru:"л"},isActive:!1},{isFunc:!1,localeData:{en:"l",ru:"д"},isActive:!1},{isFunc:!1,localeData:{en:";",ru:"ж"},alt:{en:":",ru:"ж"},isActive:!1},{isFunc:!1,localeData:{en:"'",ru:"э"},alt:{en:'"',ru:"э"},isActive:!1},{isFunc:!0,localeData:"Enter",type:"enter"}]},{style:{justifyContent:"start"},buttons:[{isFunc:!0,localeData:"Shift",type:"l-shift"},{isFunc:!1,localeData:{en:"z",ru:"я"},isActive:!1},{isFunc:!1,localeData:{en:"x",ru:"ч"},isActive:!1},{isFunc:!1,localeData:{en:"c",ru:"с"},isActive:!1},{isFunc:!1,localeData:{en:"v",ru:"м"},isActive:!1},{isFunc:!1,localeData:{en:"b",ru:"и"},isActive:!1},{isFunc:!1,localeData:{en:"n",ru:"т"},isActive:!1},{isFunc:!1,localeData:{en:"m",ru:"ь"},isActive:!1},{isFunc:!1,localeData:{en:",",ru:"б"},alt:{en:"<",ru:"б"},isActive:!1},{isFunc:!1,localeData:{en:".",ru:"ю"},alt:{en:">",ru:"ю"},isActive:!1},{isFunc:!1,localeData:{en:"/",ru:"."},alt:{en:"?",ru:","},isActive:!1},{isFunc:!0,localeData:"Up",icon:"icon-up-open"},{isFunc:!0,localeData:"Shift",type:"r-shift"}]},{style:{justifyContent:"start"},buttons:[{isFunc:!0,localeData:"Fn"},{isFunc:!0,localeData:"Ctrl"},{isFunc:!0,localeData:"Win",type:"button-win",icon:"icon-win8"},{isFunc:!0,localeData:"Alt"},{isFunc:!1,localeData:" ",type:"space"},{isFunc:!0,localeData:"Alt"},{isFunc:!0,localeData:"Ctrl"},{isFunc:!0,localeData:"Left",icon:"icon-left-open"},{isFunc:!0,localeData:"Down",icon:"icon-down-open"},{isFunc:!0,localeData:"Right",icon:"icon-right-open"},{isFunc:!0,localeData:"Menu",type:"button-menu",icon:"icon-doc-text"}]}]},{style:{width:"20%",justifyContent:"end"},lines:[{style:{justifyContent:"end"},buttons:[{isFunc:!0,localeData:"Home",type:"right-keys"},{isFunc:!0,localeData:"PgUp",type:"right-keys"},{isFunc:!0,localeData:{en:"Nav",ru:"Перейти"},type:"right-keys"}]},{style:{justifyContent:"end"},buttons:[{isFunc:!0,localeData:"End",type:"right-keys"},{isFunc:!0,localeData:"PgDn",type:"right-keys"},{isFunc:!0,localeData:{en:"Mv Up",ru:"Вверх"},type:"right-keys"}]},{style:{justifyContent:"end"},buttons:[{isFunc:!0,localeData:"Insert",type:"right-keys"},{isFunc:!0,localeData:"Pause",type:"right-keys"},{isFunc:!0,localeData:{en:"Mv Dn",ru:"Вниз"},type:"right-keys"}]},{style:{justifyContent:"end"},buttons:[{isFunc:!0,localeData:"PrtScn",type:"right-keys"},{isFunc:!0,localeData:"ScrLck",type:"right-keys"},{isFunc:!0,localeData:{en:"Dock",ru:"Закрепить"},type:"right-keys"}]},{style:{justifyContent:"end"},buttons:[{isFunc:!0,localeData:{en:"Options",ru:"Параметры"},type:"right-keys"},{isFunc:!0,localeData:{en:"Help",ru:"Справка"},type:"right-keys"},{isFunc:!0,localeData:{en:"Fade",ru:"Исчезание"},type:"right-keys"}]}]}]}]},this.init()}return _createClass(e,[{key:"init",value:function(){var e,t=this.createKeyboard();null===(e=this.screenKeyboardBlock)||void 0===e||e.appendChild(t),this.render(),this.toggleKeyboardElement.addEventListener("click",this.handleToggleKeyboard.bind(this)),this.closeKeyboard.addEventListener("click",this.handleToggleKeyboard.bind(this)),this.iconKeyboard.addEventListener("click",this.handleToggleKeyboard.bind(this)),this.dragAndDrop()}},{key:"render",value:function(){var e=this;if(this.configKeyboard.lines){var t,n=this.configKeyboard.lines.map((function(t){return e.renderLine(t)}));return(t=this.screenKeyboardElement).append.apply(t,_toConsumableArray(n)),void this.screenKeyboardBlock.append(this.screenKeyboardElement)}console.log('"lines" not found')}},{key:"renderLine",value:function(e){var t=this,n=document.createElement("div");return n.classList.add("my-screen-keyboard__line"),Array.isArray(e.buttons)&&e.buttons.forEach((function(e){n.appendChild(t.renderButton(e))})),Array.isArray(e.columns)&&e.columns.forEach((function(e){n.appendChild(t.renderColumn(e))})),n}},{key:"renderColumn",value:function(e){var t,n=this,i=document.createElement("div");return i.classList.add("my-screen-keyboard__column"),i.style.width=null===(t=e.style)||void 0===t?void 0:t.width,Array.isArray(e.lines)&&e.lines.forEach((function(e){i.appendChild(n.renderLine(e))})),i}},{key:"renderButton",value:function(e){var t=new Button(_objectSpread(_objectSpread({},e),{},{onClick:this.onClick.bind(this),currentLanguage:this.language}));return this.buttons.push(t),t.render()}},{key:"onClick",value:function(e){if(e){var t=this.buttons.find((function(t){return t.id===e}));this.toggleShiftAlt(t),null!=t&&t.isFunc&&["Shift","Alt","Caps","Fn","Ctrl","Win"].includes(t.content)&&this.buttons.forEach((function(e){e.content===t.content&&e.toggleActive()})),this.actionButton(t)}}},{key:"actionButton",value:function(e){var t=this.buttons.filter((function(e){return"Shift"===e.content&&e.active})),n=!e.isFunc&&e.isActive?e.content.toUpperCase():e.content,i=!e.isFunc&&e.isActive&&e.alt?e.alternative.toUpperCase():e.alternative;if(!e.isFunc){if(t.length>0&&e.alt)return this.currentInput.setRangeText(i,this.currentInput.selectionStart,this.currentInput.selectionEnd,"end"),void this.currentInput.focus();this.currentInput.setRangeText(n,this.currentInput.selectionStart,this.currentInput.selectionEnd,"end"),this.currentInput.focus()}if("Shift"!==e.content&&"Caps"!==e.content||this.buttons.forEach((function(e){!1===e.isActive?e.isActive=!0:e.isActive=!1,e.renderContent()})),"Backspace"===e.content){if(this.currentInput.selectionStart===this.currentInput.selectionEnd)return this.currentInput.setRangeText("",this.currentInput.selectionStart-1,this.currentInput.selectionStart,"end");this.currentInput.setRangeText("",this.currentInput.selectionStart,this.currentInput.selectionEnd,"end")}if("Del"===e.content){if(this.currentInput.selectionStart===this.currentInput.selectionEnd)return this.currentInput.setRangeText("",this.currentInput.selectionStart,this.currentInput.selectionStart+1,"end");this.currentInput.setRangeText("",this.currentInput.selectionStart,this.currentInput.selectionEnd,"end")}}},{key:"toggleShiftAlt",value:function(e){var t=this.buttons.filter((function(e){return["Shift","Alt"].includes(e.content)&&e.active})).map((function(e){return e.localeData}));2===_toConsumableArray(new Set(t)).length&&"Shift"===e.content&&this.changeLayout("Shift","Alt")}},{key:"createKeyboard",value:function(){this.screenKeyboardElement=document.createElement("div"),this.screenKeyboardElement.classList.add("my-screen-keyboard","hidden-screen-keyboard"),this.screenKeyboardElement.setAttribute("draggable","true"),this.screenKeyboardElement.setAttribute("id",generateId("keyboard"));var e=document.createElement("div");return e.classList.add("my-screen-keyboard__panel"),e.innerHTML="Screen keyboard",this.screenKeyboardElement.append(e),this.closeKeyboard=document.createElement("button"),this.closeKeyboard.classList.add("my-screen-keyboard__close"),this.closeKeyboard.innerHTML="close",e.append(this.closeKeyboard),this.createIcon(this.blockInput),this.screenKeyboardElement}},{key:"dragAndDrop",value:function(){var e,t,n,i,a=document.getElementById(this.screenKeyboardElement.id);function r(a){this.style.left=e+a.pageX-n+"px",this.style.top=t+a.pageY-i+"px"}a.addEventListener("mousedown",(function(s){s.preventDefault(),e=this.offsetLeft,t=this.offsetTop,n=s.pageX,i=s.pageY,this.addEventListener("mousemove",r,!1),window.addEventListener("mouseup",(function(){a.removeEventListener("mousemove",r,!1)}),!1)}),!1)}},{key:"changeLayout",value:function(e,t){var n=this;this.buttons.find((function(e){return"Win"===e.content&&e.active}))||this.buttons.find((function(e){return"Ctrl"===e.content&&e.active}))||(this.changeLanguage(),this.buttons.forEach((function(e){t===e.content&&e.toggleActive(),e.changeLanguage(n.language),e.renderContent(),e.reduceLongWord()})))}},{key:"changeLanguage",value:function(){this.language!==Languages.RU?this.language===Languages.EN&&(this.language=Languages.RU):this.language=Languages.EN}},{key:"handleToggleKeyboard",value:function(){this.onShowKeyboard(),this.onToggleKeyboard()}},{key:"onToggleKeyboard",value:function(){this.toggleKeyboardElement.innerHTML.includes("Go print")?this.toggleKeyboardElement.innerHTML="Hide keyboard":this.toggleKeyboardElement.innerHTML.includes("Hide keyboard")&&(this.toggleKeyboardElement.innerHTML="Go print")}},{key:"onShowKeyboard",value:function(){"my-screen-keyboard hidden-screen-keyboard"!==this.screenKeyboardElement.classList.value?"my-screen-keyboard"===this.screenKeyboardElement.classList.value&&this.screenKeyboardElement.classList.add("hidden-screen-keyboard"):this.screenKeyboardElement.classList.remove("hidden-screen-keyboard")}},{key:"createIcon",value:function(e){this.iconKeyboard=document.createElement("div"),this.iconKeyboard.classList.add("icon-keyboard"),e.appendChild(this.iconKeyboard)}}]),e}(),Button=function(){function e(t){var n=this;_classCallCheck(this,e),_defineProperty(this,"handleClick",(function(){"function"==typeof n.onClick&&n.onClick(n.id)})),this.id=(null==t?void 0:t.id)||generateId("button"),this.isFunc=Boolean(null==t?void 0:t.isFunc),this.isActive=Boolean(null==t?void 0:t.isActive),this.localeData=null==t?void 0:t.localeData,this.type=(null==t?void 0:t.type)||"base",this.active=Boolean(null==t?void 0:t.active),this.onClick=null==t?void 0:t.onClick,this.onToggle=null==t?void 0:t.onToggle,this.currentLanguage=null==t?void 0:t.currentLanguage,this.icon=null==t?void 0:t.icon,this.alt=null==t?void 0:t.alt,this.createButton(t)}return _createClass(e,[{key:"content",get:function(){return"object"===_typeof(this.localeData)?this.localeData[this.currentLanguage]:this.localeData}},{key:"alternative",get:function(){if(this.alt)return this.alt[this.currentLanguage]}},{key:"changeLanguage",value:function(e){this.currentLanguage=e}},{key:"toggleActive",value:function(){this.active=!this.active,this.keyElement.classList.toggle("_active")}},{key:"altContent",get:function(){if(this.alt){var e=document.createElement("div");return this.isActive||e.classList.remove("alt-content--a")||e.classList.add("alt-content"),this.isActive&&e.classList.add("alt-content--a"),e.innerHTML=null==this?void 0:this.alt[this.currentLanguage],e}}},{key:"mainContent",get:function(){var e=document.createElement("div");return e.innerHTML=this.content,this.alt&&this.alt[this.currentLanguage]!==this.content?(this.isActive||e.classList.remove("content--b")||e.classList.add("content"),this.isActive&&e.classList.add("content--b"),e):(!this.isFunc&&this.isActive&&(e.innerHTML=this.content.toUpperCase()),e.classList.add("one-content"),e)}},{key:"renderContent",value:function(){if(!this.icon){var e,t=this.alt?this.altContent:null,n=this.mainContent,i=[];for(this.alt&&this.alt[this.currentLanguage]!==this.content?i.push(t,n):i.push(n);this.keyElement.firstChild;)this.keyElement.removeChild(this.keyElement.firstChild);(e=this.keyElement).append.apply(e,i)}}},{key:"reduceLongWord",value:function(){if(this.isFunc){if(this.keyElement.innerText.length>6)return void this.keyElement.classList.add("letter-button--s");this.keyElement.classList.remove("letter-button--s"),this.keyElement.classList.add("letter-button")}}},{key:"createButton",value:function(){this.keyElement=document.createElement("div"),this.keyElement.setAttribute("id",this.id),this.keyElement.classList.add("my-screen-keyboard__key","".concat(this.type)),this.renderContent(),this.reduceLongWord(),this.icon&&this.keyElement.classList.add("".concat(this.icon)),this.keyElement.addEventListener("click",this.handleClick.bind(this))}},{key:"render",value:function(){return this.keyElement}}]),e}();
//# sourceMappingURL=main.min.js.map
